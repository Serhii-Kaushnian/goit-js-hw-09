{"mappings":"iiBAAA,IAgBIA,EAhBJC,EAAAC,EAAA,SAEMC,EAAO,CACXC,gBAAiBC,SAASC,cAAc,mBACxCC,QAASF,SAASC,cAAc,QAChCE,gBAAiBH,SAASC,cAAc,kBACxCG,iBAAkBJ,SAASC,cAAc,iBACzCI,eAAgBL,SAASC,cAAc,oBAGzCH,EAAKM,iBAAiBE,MAAQ,IAC9BR,EAAKK,gBAAgBG,MAAQ,IAE7BR,EAAKK,gBAAgBI,KAAO,MAC5BT,EAAKM,iBAAiBG,KAAO,MAG7B,IACIC,EACAC,EAFAC,EAA0B,EAyC9B,SAASC,EAAmBC,GACtBjB,GAAkBG,EAAKO,eAAeC,QACxCO,cAAcJ,GACdX,EAAKI,QAAQY,QACbhB,EAAKC,gBAAgBgB,UAAW,GAElCC,EAAcJ,E,CAGhB,SAASI,EAAcJ,GACCK,KAAKC,SAAW,GAEpCC,EAAAvB,GAASwB,OAAOC,QACd,qBAA0CC,OAArB3B,EAAe,QAAY2B,OAANV,EAAM,OAGlDO,EAAAvB,GAASwB,OAAOG,QAAQ,oBAAyCD,OAArB3B,EAAe,QAAY2B,OAANV,EAAM,OAEzEF,GAA2Bc,OAAO1B,EAAKM,iBAAiBE,OACxDX,GAAkB,C,CAxDpBG,EAAKI,QAAQuB,iBAAiB,UAE9B,SAAsBC,GACpBA,EAAMC,iBACN7B,EAAKC,gBAAgBgB,UAAW,EAChCpB,EAAiB,EAEjBa,EAAkBoB,aAChB,WACEZ,EAAclB,EAAKK,gBAAgBG,OAEnCO,cAAcL,GAEVV,EAAKO,eAAeC,MAAQ,GAC9BI,EAA0Bc,OAAO1B,EAAKM,iBAAiBE,OACvDG,EAAwBmB,aACtB,WACqC,GAA/B9B,EAAKM,iBAAiBE,MACxBK,EAAmBb,EAAKK,gBAAgBG,OAC/BR,EAAKM,iBAAiBE,MAAQ,GACvCK,EACEa,OAAO1B,EAAKK,gBAAgBG,OAASI,E,GAI3CZ,EAAKM,iBAAiBE,MACtBR,EAAKM,iBAAiBE,QAEc,GAA7BR,EAAKO,eAAeC,QAC7BR,EAAKC,gBAAgBgB,UAAW,E,GAGpCjB,EAAKK,gBAAgBG,MACrBR,EAAKK,gBAAgBG,M","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n//------------------------------------------------------------\nconst refs = {\n  submitButtonRef: document.querySelector('[type=\"submit\"]'),\n  formRef: document.querySelector('form'),\n  firstDelayInput: document.querySelector('[name=\"delay\"]'),\n  secondDelayInput: document.querySelector('[name=\"step\"]'),\n  amountOfDelays: document.querySelector('[name=\"amount\"]'),\n};\n//------------------------------------------------------------\nrefs.secondDelayInput.value = '0';\nrefs.firstDelayInput.value = '0';\n//------------------------------------------------------------\nrefs.firstDelayInput.step = '500';\nrefs.secondDelayInput.step = '500';\n//------------------------------------------------------------\nlet promiseCounter;\nlet secondDelayInputCounter = 0;\nlet firstIntervalId;\nlet secondDelayIntervalId;\n//------------------------------------------------------------\nrefs.formRef.addEventListener('submit', onFormSubmit);\n//------------------------------------------------------------\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  refs.submitButtonRef.disabled = true;\n  promiseCounter = 1;\n  secondDelayInputCounter;\n  firstIntervalId = setInterval(\n    () => {\n      createPromise(refs.firstDelayInput.value);\n\n      clearInterval(firstIntervalId);\n\n      if (refs.amountOfDelays.value > 1) {\n        secondDelayInputCounter = Number(refs.secondDelayInput.value);\n        secondDelayIntervalId = setInterval(\n          () => {\n            if (refs.secondDelayInput.value == 0) {\n              secondDelayHandler(refs.firstDelayInput.value);\n            } else if (refs.secondDelayInput.value > 0) {\n              secondDelayHandler(\n                Number(refs.firstDelayInput.value) + secondDelayInputCounter\n              );\n            }\n          },\n          refs.secondDelayInput.value,\n          refs.secondDelayInput.value\n        );\n      } else if (refs.amountOfDelays.value == 1) {\n        refs.submitButtonRef.disabled = false;\n      }\n    },\n    refs.firstDelayInput.value,\n    refs.firstDelayInput.value\n  );\n}\n//------------------------------------------------------------\nfunction secondDelayHandler(delay) {\n  if (promiseCounter == refs.amountOfDelays.value) {\n    clearInterval(secondDelayIntervalId);\n    refs.formRef.reset();\n    refs.submitButtonRef.disabled = false;\n  }\n  createPromise(delay);\n}\n//------------------------------------------------------------\nfunction createPromise(delay) {\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    Notiflix.Notify.success(\n      `Fulfilled promise ${promiseCounter} in ${delay}ms`\n    );\n  } else {\n    Notiflix.Notify.failure(`Rejected promise ${promiseCounter} in ${delay}ms`);\n  }\n  secondDelayInputCounter += Number(refs.secondDelayInput.value);\n  promiseCounter += 1;\n}\n//------------------------------------------------------------\n"],"names":["$ce04d3a99e08e73b$var$promiseCounter","$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$refs","submitButtonRef","document","querySelector","formRef","firstDelayInput","secondDelayInput","amountOfDelays","value","step","$ce04d3a99e08e73b$var$firstIntervalId","$ce04d3a99e08e73b$var$secondDelayIntervalId","$ce04d3a99e08e73b$var$secondDelayInputCounter","$ce04d3a99e08e73b$var$secondDelayHandler","delay","clearInterval","reset","disabled","$ce04d3a99e08e73b$var$createPromise","Math","random","$parcel$interopDefault","Notify","success","concat","failure","Number","addEventListener","event","preventDefault","setInterval"],"version":3,"file":"03-promises.fa1e2aee.js.map"}