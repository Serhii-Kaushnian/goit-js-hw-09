{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,gBAAiBC,SAASC,cAAc,mBACxCC,QAASF,SAASC,cAAc,QAChCE,gBAAiBH,SAASC,cAAc,kBACxCG,iBAAkBJ,SAASC,cAAc,iBACzCI,eAAgBL,SAASC,cAAc,oBAOzC,IAAIK,EACAC,EACAC,EAyCJ,SAASC,EAAcC,GACCC,KAAKC,SAAW,GAEpCC,EAAAjB,GAASkB,OAAOC,QACd,qBAAqBT,QAAqBI,OAG5CG,EAAAjB,GAASkB,OAAOE,QAAQ,oBAAoBV,QAAqBI,OAEnEJ,GAAkB,C,CAvDpBR,EAAKK,gBAAgBc,KAAO,MAC5BnB,EAAKM,iBAAiBa,KAAO,MAM7BnB,EAAKI,QAAQgB,iBAAiB,UAE9B,SAAsBC,GACpBA,EAAMC,iBACNtB,EAAKC,gBAAgBsB,UAAW,EAChCf,EAAiB,EACjBC,EAAkBe,aAChB,KACEb,EAAcX,EAAKK,gBAAgBoB,OAEnCC,cAAcjB,GAEVT,EAAKO,eAAekB,MAAQ,EAC9Bf,EAAwBc,aACtB,MAeV,SAA4BZ,GAC1Be,QAAQC,IAAIpB,GACRA,GAAkBR,EAAKO,eAAekB,QACxCC,cAAchB,GACdV,EAAKI,QAAQyB,QACb7B,EAAKC,gBAAgBsB,UAAW,GAElCZ,EAAcC,E,CArBJkB,CAAmB9B,EAAKM,iBAAiBmB,MAAM,GAEjDzB,EAAKM,iBAAiBmB,MACtBzB,EAAKM,iBAAiBmB,OAEc,GAA7BzB,EAAKO,eAAekB,QAC7BzB,EAAKC,gBAAgBsB,UAAW,EAAK,GAGzCvB,EAAKK,gBAAgBoB,MACrBzB,EAAKK,gBAAgBoB,M","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n//------------------------------------------------------------\nconst refs = {\n  submitButtonRef: document.querySelector('[type=\"submit\"]'),\n  formRef: document.querySelector('form'),\n  firstDelayInput: document.querySelector('[name=\"delay\"]'),\n  secondDelayInput: document.querySelector('[name=\"step\"]'),\n  amountOfDelays: document.querySelector('[name=\"amount\"]'),\n};\n\n//------------------------------------------------------------\nrefs.firstDelayInput.step = '500';\nrefs.secondDelayInput.step = '500';\n//------------------------------------------------------------\nlet promiseCounter;\nlet firstIntervalId;\nlet secondDelayIntervalId;\n//------------------------------------------------------------\nrefs.formRef.addEventListener('submit', onFormSubmit);\n//------------------------------------------------------------\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  refs.submitButtonRef.disabled = true;\n  promiseCounter = 1;\n  firstIntervalId = setInterval(\n    () => {\n      createPromise(refs.firstDelayInput.value);\n\n      clearInterval(firstIntervalId);\n\n      if (refs.amountOfDelays.value > 1) {\n        secondDelayIntervalId = setInterval(\n          () => {\n            secondDelayHandler(refs.secondDelayInput.value);\n          },\n          refs.secondDelayInput.value,\n          refs.secondDelayInput.value\n        );\n      } else if (refs.amountOfDelays.value == 1) {\n        refs.submitButtonRef.disabled = false;\n      }\n    },\n    refs.firstDelayInput.value,\n    refs.firstDelayInput.value\n  );\n}\n//------------------------------------------------------------\nfunction secondDelayHandler(delay) {\n  console.log(promiseCounter);\n  if (promiseCounter == refs.amountOfDelays.value) {\n    clearInterval(secondDelayIntervalId);\n    refs.formRef.reset();\n    refs.submitButtonRef.disabled = false;\n  }\n  createPromise(delay);\n}\n//------------------------------------------------------------\nfunction createPromise(delay) {\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    Notiflix.Notify.success(\n      `Fulfilled promise ${promiseCounter} in ${delay}ms`\n    );\n  } else {\n    Notiflix.Notify.failure(`Rejected promise ${promiseCounter} in ${delay}ms`);\n  }\n  promiseCounter += 1;\n}\n//------------------------------------------------------------\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$refs","submitButtonRef","document","querySelector","formRef","firstDelayInput","secondDelayInput","amountOfDelays","$47d4ff9957288465$var$promiseCounter","$47d4ff9957288465$var$firstIntervalId","$47d4ff9957288465$var$secondDelayIntervalId","$47d4ff9957288465$var$createPromise","delay","Math","random","$parcel$interopDefault","Notify","success","failure","step","addEventListener","event","preventDefault","disabled","setInterval","value","clearInterval","console","log","reset","$47d4ff9957288465$var$secondDelayHandler"],"version":3,"file":"03-promises.5466d4db.js.map"}