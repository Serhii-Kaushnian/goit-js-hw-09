{"mappings":"iiBAAA,IAWIA,EACAC,EAZJC,EAAAC,EAAA,SAEMC,EAAO,CACXC,gBAAiBC,SAASC,cAAc,mBACxCC,QAASF,SAASC,cAAc,QAChCE,gBAAiBH,SAASC,cAAc,kBACxCG,iBAAkBJ,SAASC,cAAc,iBACzCI,eAAgBL,SAASC,cAAc,oBAGrCK,EAAiB,EAyCrB,SAASC,EAAcC,GACCC,KAAKC,SAAW,GAEpCC,EAAAf,GAASgB,OAAOC,QACd,qBAA0CC,OAArBR,EAAe,QAAYQ,OAANN,EAAM,OAGlDG,EAAAf,GAASgB,OAAOG,QAAQ,oBAAyCD,OAArBR,EAAe,QAAYQ,OAANN,EAAM,OAEzEF,GAAkB,C,CA9CpBR,EAAKI,QAAQc,iBAAiB,UAE9B,SAAsBC,GACpBA,EAAMC,iBACNpB,EAAKC,gBAAgBoB,UAAW,EAChCb,EAAiB,EACjBZ,EAAkB0B,aAChB,WACEb,EAAcT,EAAKK,gBAAgBkB,OACnC1B,EAAwByB,aACtB,YAiBR,SAA4BE,EAAUd,GACpCe,cAAc7B,GACVY,GAAkBR,EAAKO,eAAegB,QACxCE,cAAc5B,GACdG,EAAKI,QAAQsB,QACb1B,EAAKC,gBAAgBoB,UAAW,GAElCZ,EAAcC,E,CAvBNiB,CACE3B,EAAKO,eAAegB,MACpBvB,EAAKM,iBAAiBiB,M,GAG1BvB,EAAKM,iBAAiBiB,MACtBvB,EAAKO,eAAegB,MACpBvB,EAAKM,iBAAiBiB,M,GAG1BvB,EAAKK,gBAAgBkB,MACrBvB,EAAKO,eAAegB,MACpBvB,EAAKK,gBAAgBkB,M","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n//------------------------------------------------------------\nconst refs = {\n  submitButtonRef: document.querySelector('[type=\"submit\"]'),\n  formRef: document.querySelector('form'),\n  firstDelayInput: document.querySelector('[name=\"delay\"]'),\n  secondDelayInput: document.querySelector('[name=\"step\"]'),\n  amountOfDelays: document.querySelector('[name=\"amount\"]'),\n};\n//------------------------------------------------------------\nlet promiseCounter = 1;\nlet firstIntervalId;\nlet secondDelayIntervalId;\n//------------------------------------------------------------\nrefs.formRef.addEventListener('submit', onFormSubmit);\n//------------------------------------------------------------\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  refs.submitButtonRef.disabled = true;\n  promiseCounter = 1;\n  firstIntervalId = setInterval(\n    () => {\n      createPromise(refs.firstDelayInput.value);\n      secondDelayIntervalId = setInterval(\n        () => {\n          secondDelayHandler(\n            refs.amountOfDelays.value,\n            refs.secondDelayInput.value\n          );\n        },\n        refs.secondDelayInput.value,\n        refs.amountOfDelays.value,\n        refs.secondDelayInput.value\n      );\n    },\n    refs.firstDelayInput.value,\n    refs.amountOfDelays.value,\n    refs.firstDelayInput.value\n  );\n}\n//------------------------------------------------------------\nfunction secondDelayHandler(position, delay) {\n  clearInterval(firstIntervalId);\n  if (promiseCounter == refs.amountOfDelays.value) {\n    clearInterval(secondDelayIntervalId);\n    refs.formRef.reset();\n    refs.submitButtonRef.disabled = false;\n  }\n  createPromise(delay);\n}\n//------------------------------------------------------------\nfunction createPromise(delay) {\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    Notiflix.Notify.success(\n      `Fulfilled promise ${promiseCounter} in ${delay}ms`\n    );\n  } else {\n    Notiflix.Notify.failure(`Rejected promise ${promiseCounter} in ${delay}ms`);\n  }\n  promiseCounter += 1;\n}\n//------------------------------------------------------------\n"],"names":["$ce04d3a99e08e73b$var$firstIntervalId","$ce04d3a99e08e73b$var$secondDelayIntervalId","$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$refs","submitButtonRef","document","querySelector","formRef","firstDelayInput","secondDelayInput","amountOfDelays","$ce04d3a99e08e73b$var$promiseCounter","$ce04d3a99e08e73b$var$createPromise","delay","Math","random","$parcel$interopDefault","Notify","success","concat","failure","addEventListener","event","preventDefault","disabled","setInterval","value","position","clearInterval","reset","$ce04d3a99e08e73b$var$secondDelayHandler"],"version":3,"file":"03-promises.447dd369.js.map"}